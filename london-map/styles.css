* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; color: #222; }

.app-header { display: flex; align-items: center; justify-content: space-between; gap: 16px; padding: 12px 16px; border-bottom: 1px solid #eee; background: #fff; position: sticky; top: 0; z-index: 10; }
.app-header .branding h1 { margin: 0 0 4px 0; font-size: 20px; }
.app-header .branding p { margin: 0; color: #666; font-size: 13px; }

.btn { appearance: none; border: 1px solid #ccc; background: #111; color: #fff; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px; }
.btn:hover { opacity: 0.9; }
.btn.secondary { background: #fff; color: #111; border-color: #ddd; }

.app-main { display: grid; grid-template-columns: 320px 1fr; height: calc(100% - 65px); }
.sidebar { border-right: 1px solid #eee; padding: 16px; overflow: auto; }
.map-wrap { position: relative; }
#map { position: absolute; inset: 0; }

.legend h3, .editor h3 { margin-top: 0; }
.legend-items { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 8px; }
.legend-item { display: flex; align-items: center; gap: 8px; font-size: 13px; }
.legend-swatch { width: 16px; height: 16px; border-radius: 4px; border: 1px solid #0001; display: inline-block; }
.legend-note { display: flex; align-items: center; gap: 8px; margin-top: 8px; color: #666; font-size: 12px; }
.legend-swatch.swatch-missing { background: repeating-linear-gradient(45deg, #00000010, #00000010 6px, #00000005 6px, #00000005 12px); border: 1px dashed #bbb; }

.editor .form-row { margin-bottom: 10px; }
.editor label { display: block; font-weight: 600; margin-bottom: 6px; font-size: 13px; }
.editor input[type="text"], .editor input[type="url"], .editor textarea { width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #ddd; font-size: 14px; }
.editor .checkbox label { display: flex; align-items: center; gap: 8px; font-weight: 500; }
.editor .form-actions { display: flex; gap: 8px; }
.help-text { color: #666; font-size: 12px; }

.tooltip { position: absolute; pointer-events: none; background: #111; color: #fff; font-size: 12px; padding: 6px 8px; border-radius: 6px; transform: translate(-50%, calc(-100% - 8px)); white-space: nowrap; box-shadow: 0 4px 16px rgba(0,0,0,0.15); }
.tooltip::after { content: ""; position: absolute; bottom: -5px; left: 50%; transform: translateX(-50%); width: 8px; height: 8px; background: #111; rotate: 45deg; }

@media (max-width: 900px) {
  .app-main { grid-template-columns: 1fr; }
  .sidebar { order: 2; height: 42vh; }
  .map-wrap { order: 1; height: 58vh; }
}